{% extends "saving/base.html" %}
{% load static %}

{% block title %}æ°—åˆ†è²¯é‡‘{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'saving/feeling.css' %}">
{% endblock %}

{% block header_title %}æ°—åˆ†è²¯é‡‘{% endblock %}

{% block content %}
<p class="feeling-description">
    æ°—åˆ†ã«å¿œã˜ã¦è¨­å®šã—ãŸé‡‘é¡ã‚’è²¯é‡‘ï¼<br>
</p>

<form method="post">
    {% csrf_token %}

    {# é‡‘é¡ãŒæœªè¨­å®šã®å ´åˆ #}
    {% if not amounts %}
        <p>æ°—åˆ†ã”ã¨ã®è²¯é‡‘é‡‘é¡ã‚’è¨­å®šã—ã¦ãã ã•ã„</p>

        <div class="amount-setting">
            <label>ğŸ˜„ å…ƒæ°—ï¼ï¼</label>
            <input type="number" name="happy_amount" min="0" required>
        </div>

        <div class="amount-setting">
            <label>ğŸ˜ æ™®é€š</label>
            <input type="number" name="normal_amount" min="0" required>
        </div>

        <div class="amount-setting">
            <label>ğŸ˜© æ‚²ã—ã„ã€ã€</label>
            <input type="number" name="sad_amount" min="0" required>
        </div>

        <button type="submit">é‡‘é¡ã‚’æ±ºå®š</button>

    {# é‡‘é¡ãŒè¨­å®šæ¸ˆã¿ã®å ´åˆ #}
    {% else %}
        <p>è¨­å®šé‡‘é¡</p>
        <ul>
            <li>ğŸ˜„ Â¥{{ amounts.happy }}</li>
            <li>ğŸ˜ Â¥{{ amounts.normal }}</li>
            <li>ğŸ˜© Â¥{{ amounts.sad }}</li>
        </ul>

        <input type="hidden" name="happy_amount" value="{{ amounts.happy }}">
        <input type="hidden" name="normal_amount" value="{{ amounts.normal }}">
        <input type="hidden" name="sad_amount" value="{{ amounts.sad }}">

        <p>ä»Šæ—¥ã®æ°—åˆ†ã‚’é¸ã‚“ã§ãã ã•ã„</p>

        <div class="mood-buttons">
            <button type="submit" name="mood" value="happy" class="mood-btn">ğŸ˜„</button>
            <button type="submit" name="mood" value="normal" class="mood-btn">ğŸ˜</button>
            <button type="submit" name="mood" value="sad" class="mood-btn">ğŸ˜©</button>
        </div>

        {% if request.session.last_saved_amount %}
            <p class="done-message">
                Â¥{{ request.session.last_saved_amount }} ã‚’è²¯é‡‘ã—ã¾ã—ãŸ ğŸ‰
            </p>
        {% endif %}

        <button type="submit" name="reset" value="1" class="reset-btn">
            é‡‘é¡ã‚’å¤‰æ›´ã™ã‚‹
        </button>
    {% endif %}
</form>
{% endblock %}
